(this.webpackJsonpcrm=this.webpackJsonpcrm||[]).push([[0],{115:function(e,t,a){},200:function(e,t,a){e.exports=a(409)},205:function(e,t,a){},224:function(e,t,a){},229:function(e,t,a){},32:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(47),c=a.n(r),s=(a(205),a(22)),i=a.n(s),o=a(5),u=a(6),m=a(8),d=a(7),p=a(9),h=a(38),y=a(33),f=a(40),v=a.n(f),g=(a(224),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"navbar"},l.a.createElement(h.b,{to:"/"},"Home"),l.a.createElement(h.b,{to:"/Clients"},"Clients"),l.a.createElement(h.b,{to:"/Actions"},"Actions"),l.a.createElement(h.b,{to:"/Analytics"},"Analytics"))}}]),t}(n.Component)),E=(a(229),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"home-label"},l.a.createElement("div",null,l.a.createElement("span",{id:"c"},"C"),l.a.createElement("span",{id:"r"},"R"),l.a.createElement("span",{id:"m"},"M")),l.a.createElement("span",null," CUSTOMER RELATIONSHIP MANAGEMENT"))}}]),t}(n.Component)),b=(a(42),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).showUpdateWindow=function(){a.props.showUpdateWindow(a.props.client._id)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.client,t=e.name.split(" ")[0],a=e.name.split(" ")[1],n=e.firstContact.split("").splice(0,10).join(""),r=e.sold,c=e.emailType;return l.a.createElement("div",{className:"client-info",onClick:this.showUpdateWindow},l.a.createElement("div",{className:"column-info"},t),l.a.createElement("div",{className:"column-info"},a),l.a.createElement("div",{className:"column-info"},e.country),l.a.createElement("div",{className:"column-info"},n),null===c||""===c?l.a.createElement("div",{className:"column-info"},"-"):l.a.createElement("div",{className:"column-info"},c),r?l.a.createElement("div",{className:"column-info"},l.a.createElement("i",{className:"fas fa-check"})):l.a.createElement("div",{className:"column-info"},"-"),l.a.createElement("div",{className:"column-info"},e.owner))}}]),t}(n.Component)),C=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.columnHeaders;return l.a.createElement("div",{id:"column-headers"},e.map((function(e){return l.a.createElement("div",{key:e,className:"column-header"},e)})))}}]),t}(n.Component),O=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).updateClient=function(){var t=e.state.inputVals;e.props.updateClient(t)},e.handleInput=function(t){var a=t.target.name,n=e.state.inputVals;n[a]=t.target.value,e.setState({inputVals:n})},e.handleCheckbox=function(t){var a=t.target.name,n=t.target.checked,l=e.state.checkedVals,r=e.state.inputVals;"yes"===a?(l={yes:n,no:!n},r.sold=!0):(l={yes:!n,no:n},r.sold=!1),e.setState({checkedVals:l,inputVals:r})},e.componentDidMount=function(){for(var t=e.props.client,a=e.state.inputVals,n=0,l=Object.keys(a);n<l.length;n++){var r=l[n];a[r]=t[r]}e.setState({inputVals:a})},e.state={inputVals:{country:"",emailType:"",owner:"",sold:null},checkedVals:{yes:!1,no:!1}},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.client,t=this.state,a=t.inputVals,n=t.checkedVals;return l.a.createElement("div",{id:"update-client-container"},l.a.createElement("button",{className:"close-update",onClick:this.props.hideUpdateWindow},"X"),l.a.createElement("div",{id:"client-name"}," ",e.name," "),l.a.createElement("div",{id:"update-client"},l.a.createElement("span",null," Country:"),l.a.createElement("input",{className:"text-input",name:"country",type:"text",value:a.country,onChange:this.handleInput}),l.a.createElement("span",null," emailType:"),l.a.createElement("input",{className:"text-input",name:"emailType",type:"text",value:a.emailType,onChange:this.handleInput}),l.a.createElement("span",null," Owner:"),l.a.createElement("input",{className:"text-input",name:"owner",type:"text",value:a.owner,onChange:this.handleInput}),l.a.createElement("span",null," Sold:"),l.a.createElement("div",{id:"radio-update-input"},l.a.createElement("input",{className:"radio-update-input",name:"yes",type:"radio",checked:n.yes,onChange:this.handleCheckbox}),l.a.createElement("span",null,"Yes"),l.a.createElement("input",{className:"radio-update-input",name:"no",type:"radio",checked:n.no,onChange:this.handleCheckbox}),l.a.createElement("span",null,"No"))),l.a.createElement("div",{className:"update-button",onClick:this.updateClient}," Update"))}}]),t}(n.Component),S=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleSearchVals=function(t){var a=t.target.value;e.setState({searchValue:a},(function(){e.props.handleSearchVals(a)}))},e.handleSold=function(t){var a=t.target.value;a="yes"===a,e.props.handleSold(a)},e.handleSelect=function(t){var a={label:t.target.label,value:t.target.value};e.setState({searchCategory:a},(function(){e.props.handleSelect(a.value)}))},e.state={columnHeaders:[{value:"name",label:"Name"},{value:"country",label:"country"},{value:"emailType",label:"Email Type"},{value:"owner",label:"Owner"}],searchCategory:{value:"name",label:"Name"},searchValue:""},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.columnHeaders,t=this.state.searchCategory;return l.a.createElement("div",{id:"search-container"},l.a.createElement("input",{id:"search-input",type:"Text",placeholder:"Search",value:this.state.searchValue,onChange:this.handleSearchVals}),l.a.createElement("select",{id:"select",onChange:this.handleSelect,label:t.label,value:t.value},e.map((function(e){return l.a.createElement("option",{value:e.value,key:e.label},e.label)}))),l.a.createElement("span",{id:"check-sold"},l.a.createElement("span",{id:"label"},"Sold:"),l.a.createElement("input",{type:"radio",name:"sold",value:"yes",onChange:this.handleSold}),l.a.createElement("span",null,"Yes"),l.a.createElement("input",{type:"radio",name:"sold",value:"no",onChange:this.handleSold}),l.a.createElement("span",null,"No")))}}]),t}(n.Component),w=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"spinner"},l.a.createElement("div",{className:"rect1"}),l.a.createElement("div",{className:"rect2"}),l.a.createElement("div",{className:"rect3"}),l.a.createElement("div",{className:"rect4"}),l.a.createElement("div",{className:"rect5"}))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).pageBack=function(){console.log("Go back"),a.props.pageBack()},a.pageForward=function(){console.log("Go forward"),a.props.pageForward()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.currentPage,t=this.props.numOfPages;return l.a.createElement("div",{id:"page-manager"},l.a.createElement("i",{className:"fas fa-caret-left",id:"arrow",onClick:this.pageBack}),l.a.createElement("span",null," ",e," - ",t," "),l.a.createElement("i",{className:"fas fa-caret-right",id:"arrow",onClick:this.pageForward}))}}]),t}(n.Component),k=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).pageBack=function(){e.state.currentPage>1&&e.setState({currentPage:e.state.currentPage-1},(function(){e.clientsToDisplay()}))},e.pageForward=function(){var t=e.state;t.currentPage<t.numOfPages&&e.setState({currentPage:e.state.currentPage+1},(function(){e.clientsToDisplay()}))},e.showUpdateWindow=function(t){e.setState({showUpdateWindow:!0,clientToUpdate:t})},e.hideUpdateWindow=function(){e.setState({showUpdateWindow:!1})},e.updateClient=function(t){var a=e.state.clientToUpdate;e.props.updateClient(a,t),e.setState({showUpdateWindow:!1})},e.handleSearchVals=function(t){e.setState({searchVal:t},(function(){e.getFilteredClients()}))},e.handleSelect=function(t){e.setState({searchCategory:t},(function(){e.getFilteredClients()}))},e.handleSold=function(t){e.setState({soldVal:t},(function(){e.getFilteredClients()}))},e.clientsToDisplay=function(){var t=e.state,a=t.filteredClients,n=t.currentPage,l=t.itemsPerPage,r=a.length,c=(n-1)*l,s=Math.ceil(r/l);e.setState({numOfPages:s});var i=a.slice(c,n*l);e.setState({clientsToDisplay:i})},e.getFilteredClients=function(){console.log("getting filtered clients");var t=e.state,a=t.clients,n=t.searchCategory,l=t.searchVal,r=t.soldVal;null===l&&(l="");var c=[];a.forEach((function(e){null===e[n]&&(e[n]=""),null!==r?e[n].toLowerCase().includes(l.toLowerCase())&&e.sold===r&&c.push(e):e[n].toLowerCase().includes(l.toLowerCase())&&c.push(e)})),e.setState({filteredClients:c},(function(){e.clientsToDisplay()}))},e.componentDidMount=function(){console.log("Clients - Mounted"),e.setState({clients:e.props.clients},(function(){e.getFilteredClients()}))},e.state={clients:[],filteredClients:[],clientsToDisplay:[],itemsPerPage:30,currentPage:1,numOfPages:null,searchVal:"",searchCategory:"name",soldVal:null,showUpdateWindow:!1,clientToUpdate:"",columnHeaders:["Name","Surname","Country","First Contact","Email Type","Sold","Owner"]},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;console.log("Clients - recieved props"),this.setState({clients:e.clients},(function(){t.getFilteredClients()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.clients,n=t.filteredClients,r=t.clientsToDisplay,c=this.state,s=c.showUpdateWindow,i=c.clientToUpdate,o={};return i&&(o=n.filter((function(e){return e._id===i}))[0]),0===a.length?l.a.createElement(w,null):l.a.createElement("div",{id:"clients-page"},l.a.createElement(S,{handleSearchVals:this.handleSearchVals,handleSelect:this.handleSelect,handleSold:this.handleSold}),l.a.createElement(j,{currentPage:this.state.currentPage,numOfPages:this.state.numOfPages,pageBack:this.pageBack,pageForward:this.pageForward}),l.a.createElement("div",{id:"clients-table"},l.a.createElement(C,{columnHeaders:this.state.columnHeaders}),l.a.createElement("div",{id:"clients-rows"},r.map((function(t){return l.a.createElement(b,{key:t._id,client:t,showUpdateWindow:e.showUpdateWindow})})))),s?l.a.createElement(O,{client:o,hideUpdateWindow:this.hideUpdateWindow,updateClient:this.updateClient}):l.a.createElement(l.a.Fragment,null))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleCheck=function(e){var t=a.state.check;t[e]=!1,a.setState({check:t}),setTimeout((function(){t[e]=!0,a.setState({check:t})}),10)},a.handleError=function(e){a.setState({messageType:e,check:{emailType:!1,owner:!1,sold:!1}}),setTimeout((function(){a.setState({messageType:null})}),3e3)},a.changeClientInfo=function(e){var t,n,l;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.target.id,n=a.state.inputVals.name,l=a.state.inputVals[t],""!==n){r.next=7;break}a.handleError("enterClientName"),r.next=15;break;case 7:if(""!==l){r.next=11;break}a.handleError("emptyVal"),r.next=15;break;case 11:return r.next=13,i.a.awrap(a.props.changeClientInfo(n,t,l));case 13:r.sent?(a.handleCheck(t),console.log("updated client",n)):a.handleError("doesntExist");case 15:case"end":return r.stop()}}))},a.handleInput=function(e){var t=e.target.name,n=e.target.value,l=a.state.inputVals;l[t]=n,a.setState({inputVals:l})},a.state={inputVals:{name:"",emailType:"",owner:"",sold:!0},messageType:null,messageContent:{enterClientName:"Please enter the client's name",doesntExist:"This client doesn't exist",emptyVal:"Please enter content"},check:{emailType:!1,owner:!1,sold:!1}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.inputVals,a=e.messageContent,n=e.messageType,r=e.check,c=Object.keys(this.props.salesByOwner).map((function(e){var t=e.split(" ");for(var a in t){var n=t[a],l=n.charAt(0).toUpperCase()+n.slice(1);t[a]=l}return t.join(" ")}));return l.a.createElement("div",{id:"actions-update"},l.a.createElement("h3",null,"UPDATE"),l.a.createElement("div",{id:"actions-update-container"},l.a.createElement("span",{className:"client-name"}," Name:"),l.a.createElement("input",{options:["lets","try","this"],placeholder:"Client name",className:"text-input",id:"update-name-input",name:"name",type:"text",value:t.name,onChange:this.handleInput}),"doesntExist"===n?l.a.createElement("span",{id:"doesnt-exist"},a.doesntExist):l.a.createElement(l.a.Fragment,null),"emptyVal"===n?l.a.createElement("span",{id:"doesnt-exist"},a.emptyVal):l.a.createElement(l.a.Fragment,null),"enterClientName"===n?l.a.createElement("span",{id:"doesnt-exist"},a.enterClientName):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{id:"other-updates-container"},l.a.createElement("span",null," Send email:"),l.a.createElement("select",{value:t.emailType,className:"text-input",name:"emailType",type:"text",onChange:this.handleInput},l.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Email type"),l.a.createElement("option",{value:"A"},"A"),l.a.createElement("option",{value:"B"},"B"),l.a.createElement("option",{value:"C"},"C"),l.a.createElement("option",{value:"D"},"D")),l.a.createElement("span",{className:"click",id:"emailType",onClick:this.changeClientInfo},"SEND"),r.emailType?l.a.createElement("i",{className:"fas fa-check"}):l.a.createElement("div",null),l.a.createElement("span",null," Tranfer ownership to:"),l.a.createElement("input",{list:"owners",id:"owner",name:"owner",className:"text-input",placeholder:"Owner",value:t.owner,onChange:this.handleInput}),l.a.createElement("span",{className:"click",id:"owner",onClick:this.changeClientInfo},"TRANSFER"),r.owner?l.a.createElement("i",{className:"fas fa-check"}):l.a.createElement("div",null),l.a.createElement("span",null," Declare Sale:"),l.a.createElement("div",null),l.a.createElement("span",{className:"click",id:"sold",onClick:this.changeClientInfo},"DECLARE"),r.sold?l.a.createElement("i",{className:"fas fa-check"}):l.a.createElement("div",null)),l.a.createElement("datalist",{id:"owners"},c.map((function(e){return l.a.createElement("option",{value:e,key:e})})))))}}]),t}(n.Component),B=(a(115),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleInput=function(t){var a=t.target.name,n=t.target.value,l=e.state.inputVals;l[a]=n,e.setState({inputVals:l})},e.handleRequired=function(){for(var t=e.state.inputVals,a=e.state.isEmpty,n=0,l=["name","surname","country","owner"];n<l.length;n++){var r=l[n];""===t[r]?a[r]=!0:a[r]=!1}e.setState({isEmpty:a})},e.addClient=function(){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.handleRequired(),""===(t=e.state.inputVals).name||""===t.surname||""===t.country||""===t.owner){a.next=9;break}return a.next=5,i.a.awrap(e.props.addNewClient(t));case 5:a.sent?(console.log("New client added to db"),e.setState({isLegit:!0})):(e.setState({isLegit:!1}),console.log("Error adding client to db")),a.next=10;break;case 9:e.setState({isLegit:!1});case 10:case"end":return a.stop()}}))},e.state={inputVals:{name:"",surname:"",country:"",owner:"",email:""},isLegit:!1,isEmpty:{}},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.inputVals,a=e.isEmpty,n=e.isLegit;return l.a.createElement("div",{id:"actions-add"},l.a.createElement("h3",null,"ADD CLIENT"),l.a.createElement("div",{id:"actions-add-container"},l.a.createElement("span",null,"First name:"),l.a.createElement("input",{name:"name",type:"text",value:t.name,onChange:this.handleInput}),a.name?l.a.createElement("i",{className:"fas fa-exclamation"}):l.a.createElement("div",null),l.a.createElement("span",null,"Surname:"),l.a.createElement("input",{name:"surname",type:"text",value:t.surname,onChange:this.handleInput}),a.surname?l.a.createElement("i",{className:"fas fa-exclamation"}):l.a.createElement("div",null),l.a.createElement("span",null,"Country:"),l.a.createElement("input",{name:"country",type:"text",value:t.country,onChange:this.handleInput}),a.country?l.a.createElement("i",{className:"fas fa-exclamation"}):l.a.createElement("div",null),l.a.createElement("span",null,"Owner:"),l.a.createElement("input",{name:"owner",type:"text",value:t.owner,onChange:this.handleInput}),a.owner?l.a.createElement("i",{className:"fas fa-exclamation"}):l.a.createElement("div",null),l.a.createElement("span",null,"Email address:"),l.a.createElement("input",{name:"email",type:"text",value:t.email,onChange:this.handleInput}),l.a.createElement("div",null)),l.a.createElement("div",{id:"button",onClick:this.addClient},"Add New Client"),n?l.a.createElement("i",{className:"fas fa-check"}):l.a.createElement(l.a.Fragment,null))}}]),t}(n.Component)),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={salesByOwner:e.salesByOwner},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("Actions - recieved props:",e.salesByOwner),this.setState({salesByOwner:e.salesByOwner})}},{key:"render",value:function(){var e=this.state.salesByOwner;return console.log(e),l.a.createElement("div",{id:"actions-page"},l.a.createElement(N,{salesByOwner:e,changeClientInfo:this.props.changeClientInfo}),l.a.createElement("hr",null),l.a.createElement(B,{addNewClient:this.props.addNewClient}))}}]),t}(n.Component),A=a(12),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={salesByCategory:{owner:[],emailType:[],country:[]},categoryInput:"owner"},a.getSalesByCategory=function(){var e=a.state,t=e.salesByCategory,n=e.categoryInput;0===t[n].length&&a.props.getSalesByCategory(n)},a.handleInput=function(e){var t=e.target.value,n=a.state.categoryInput;n=t,a.setState({categoryInput:n},(function(){a.getSalesByCategory()}))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.salesByCategory,a=e.categoryInput;console.log(t);var n=[],r=t[a];if(!!Object.keys(r).length)for(var c=0,s=Object.keys(r);c<s.length;c++){var i=s[c];n.push(r[i])}var o=Object.keys(t);return l.a.createElement("div",{id:"sales-by-category"},l.a.createElement("div",{id:"choose-category"},l.a.createElement("span",null,"Sales by"),l.a.createElement("select",{value:a,onChange:this.handleInput,id:"category",className:"category-choice",type:"text"},o.map((function(e){return l.a.createElement("option",{value:e,key:e},e)})))),l.a.createElement("div",{className:"chart"},l.a.createElement(A.i,{height:180,width:"100%"},l.a.createElement(A.b,{width:100,height:100,data:n,margin:{top:20,right:20,bottom:20,left:20}},l.a.createElement(A.k,{dataKey:"name"}),l.a.createElement(A.l,null),l.a.createElement(A.j,null),l.a.createElement(A.a,{dataKey:"sales",stackId:"a",fill:"#8884d8"}),l.a.createElement(A.a,{dataKey:"clients",stackId:"a",fill:"#82ca9d"})))))}}]),t}(n.Component);V.getDerivedStateFromProps=function(e,t){return e.salesByCategory&&e.salesByCategory!==t.salesByCategory?{salesByCategory:e.salesByCategory}:null};var T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={salesByOwner:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.salesByOwner,t={};Object.keys(e).forEach((function(a){t[a]=e[a].sales}));var a=Object.keys(t).sort((function(e,a){return t[a]-t[e]})).splice(0,3),n=[];return a.forEach((function(e){n.push({name:e,sales:t[e]})})),console.log(n),l.a.createElement("div",{id:"top-employees"},l.a.createElement("div",{className:"chart-title"},"Top Employees"),l.a.createElement("div",{className:"chart"},l.a.createElement(A.i,{height:180,width:"100%"},l.a.createElement(A.d,{layout:"vertical",width:100,height:100,data:n,margin:{top:20,right:20,bottom:20,left:20}},l.a.createElement(A.c,{stroke:"#f5f5f5"}),l.a.createElement(A.k,{type:"number"}),l.a.createElement(A.l,{dataKey:"name",type:"category"}),l.a.createElement(A.j,null),l.a.createElement(A.a,{dataKey:"sales",barSize:10,fill:"#003f5c"})))))}}]),t}(n.Component);T.getDerivedStateFromProps=function(e,t){return e.salesByOwner&&e.salesByOwner!==t.salesByOwner?{salesByOwner:e.salesByOwner}:null};var I=T,M=[{clients:2,name:"Mar",sales:2,year:"2019"},{clients:10,name:"Apr",sales:5,year:"2019"},{clients:12,name:"May",sales:7,year:"2019"},{clients:11,name:"Jun",sales:10,year:"2019"},{clients:4,name:"Jul",sales:3,year:"2019"},{clients:2,name:"Aug",sales:2,year:"2019"},{clients:2,name:"Sep",sales:2,year:"2019"},{clients:1,name:"Oct",sales:1,year:"2019"},{clients:4,name:"Nov",sales:3,year:"2019"},{clients:10,name:"Dec",sales:6,year:"2019"},{clients:34,name:"Jan",sales:22,year:"2020"}],D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={salesSince:{data:[],ready:!1}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.salesSince,t=!0;10!==e.data.length&&(t=!1),console.log(e);var a="";return 0!==e.data.length&&(a={month:e.data[0].name,year:e.data[0].year}),t?l.a.createElement("div",null):l.a.createElement("div",{id:"sales-since"},l.a.createElement("div",{className:"chart-title"},"Monthly Sales Since ",a.month," ",a.year),l.a.createElement(A.i,{height:180,width:"100%"},l.a.createElement(A.f,{width:100,height:100,data:M,margin:{top:20,right:20,bottom:20,left:20}},l.a.createElement(A.k,{dataKey:"name"}),l.a.createElement(A.l,null),l.a.createElement(A.j,null),l.a.createElement(A.e,{type:"monotone",dataKey:"sales",stroke:"#ff6e54",dot:!1,strokeWidth:2}))))}}]),t}(n.Component);D.getDerivedStateFromProps=function(e,t){return e.salesSince&&e.salesSince.ready!==t.salesSince.ready?{salesSince:e.salesSince}:null};var P=[{name:"Last Month",value:44},{name:"Last Six Months",value:57},{name:"Last year",value:95}],F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={clientsSum:{data:{1:0,6:0,12:0},ready:!1}},a.handleClientAcquisition=function(){[12,6,1].forEach((function(e){1===e?a.props.handleMonthlySales(e,"clientAcquisition","ready"):a.props.handleMonthlySales(e,"clientAcquisition","loading")}))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.clientsSum,t={1:"Last Month",6:"Last Six Months",12:"Last year"},a=[];return Object.keys(e.data).forEach((function(n){a.push({name:t[n],value:e.data[n]})})),l.a.createElement("div",{id:"clilent-acquisition"},l.a.createElement("div",{className:"chart-title"},"Client Aquisition"),l.a.createElement(A.i,{height:180,width:"100%"},l.a.createElement(A.h,{art:!0,width:100,height:100},l.a.createElement(A.g,{dataKey:"value",isAnimationActive:!0,data:P,innerRadius:35,outerRadius:50,fill:"#95a5a6",label:!0}),l.a.createElement(A.j,null))))}}]),t}(n.Component);F.getDerivedStateFromProps=function(e,t){return e.clientsSum&&e.clientsSum.ready!==t.clientsSum.ready?{clientsSum:e.clientsSum}:null};a(32);var U=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"charts-container"},l.a.createElement("div",{id:"charts-container1"},l.a.createElement(I,{salesByOwner:this.props.salesByCategory.owner}),l.a.createElement(V,{salesByCategory:this.props.salesByCategory,getSalesByCategory:this.props.getSalesByCategory})),l.a.createElement("div",{id:"charts-container2"},l.a.createElement(D,{handleMonthlySales:this.props.handleMonthlySales,salesSince:this.props.salesSince}),l.a.createElement(F,{handleMonthlySales:this.props.handleMonthlySales,clientsSum:this.props.clientsSum})))}}]),t}(n.Component),W=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.iconName,t=this.props.data,a=this.props.title;return l.a.createElement("div",{className:"badge"},l.a.createElement("span",{className:"icon-container"},l.a.createElement("i",{className:"fas fa-".concat(e)})),l.a.createElement("span",{className:"data"},t),l.a.createElement("span",{className:"title"},a))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={iconName:"chart-line",data:14},a.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.iconName,a=e.data,n=new Date,r=this.monthNames[n.getMonth()],c="New ".concat(r," Clients");return l.a.createElement("div",{id:"new-clients",className:"badge-container"},l.a.createElement(W,{iconName:t,data:a,title:c}))}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={iconName:"envelope",data:412,title:"Emails Sent"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.iconName,a=e.data,n=e.title;return l.a.createElement("div",{id:"emails-sent",className:"badge-container"},l.a.createElement(W,{iconName:t,data:a,title:n}))}}]),t}(n.Component),J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={iconName:"user-circle",data:198,title:"Outstanding Clients"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.iconName,a=e.data,n=e.title;return l.a.createElement("div",{id:"outstanding-clients",className:"badge-container"},l.a.createElement(W,{iconName:t,data:a,title:n}))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={iconName:"globe-americas",data:"France",title:"Hottest Country"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.iconName,a=e.data,n=e.title;return l.a.createElement("div",{id:"hottest-country",className:"badge-container"},l.a.createElement(W,{iconName:t,data:a,title:n}))}}]),t}(n.Component),q=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"badges-container"},l.a.createElement(L,null),l.a.createElement(R,null),l.a.createElement(J,null),l.a.createElement(H,null))}}]),t}(n.Component),K=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(q,null),l.a.createElement(U,{salesByCategory:this.props.salesByCategory,getSalesByCategory:this.props.getSalesByCategory,handleMonthlySales:this.props.handleMonthlySales,salesSince:this.props.salesSince,clientsSum:this.props.clientsSum}))}}]),t}(n.Component),z=(a(408),window.location.hostname.includes("localhost")?"http://localhost:4000/":"/"),G=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).componentDidMount=function(){console.log("App- Mounted"),e.getClients(),e.getSalesByCategory("owner")},e.getClients=function(){v.a.get(z+"clients").then((function(t){console.log("App- Got Clients from db"),e.setState({clients:t.data})})).catch((function(e){console.log(e)}))},e.getSalesByCategory=function(t){var a=t[0].toUpperCase()+t.slice(1),n="salesBy"+a;v.a.get(z+"salesBy/"+a).then((function(a){console.log("App- Got "+n+" from db");var l=e.state.salesByCategory;l[t]=a.data,e.setState({salesByCategory:l})})).catch((function(e){console.log(e)}))},e.setClientsSum=function(t,a,n){var l=e.state.clientsSum,r=parseInt(l.data[a],10);r+=t.data.clients,l.data[a]=r,l.ready=n,e.setState({clientsSum:l})},e.setSalesSince=function(t,a,n){var l=e.state.salesSince;l.data.push(t.data),l.ready=n,e.setState({salesSince:l})},e.getSalesSince=function(t,a,n){var l,r=e.pastMonths(t);r.forEach((function(e,c){l=c===r.length-1&&"ready"===n;var s=e.month,i=e.year;v.a.get(z+"salesSince/".concat(i,"/").concat(s)).then((function(e){a(e,t,l)})).catch((function(e){console.log(e)}))})),console.log("App- Got salesSince from db")},e.handleMonthlySales=function(t,a,n){var l;if("clientAcquisition"===a){l=e.setClientsSum;var r=e.state.clientsSum;r.data[t]=0,r.ready=!1,e.setState({clientsSum:r}),e.getSalesSince(t,l,n)}else{l=e.setSalesSince;var c=e.state.salesSince;c.data=[],c.ready=!1,e.setState({salesSince:c}),e.getSalesSince(t,l,n)}},e.addNewClient=function(t){var a,n,l,r,c;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.capitalizeWord(t.name),n=e.capitalizeWord(t.surname),l=e.capitalizeWord(t.country),r="".concat(e.capitalizeWord(t.owner.split(" ")[0])," ").concat(e.capitalizeWord(t.owner.split(" ")[1])),c={name:"".concat(a," ").concat(n),country:l,email:t.email||"",owner:r,sold:!1,firstContact:(new Date).toISOString().split("T")[0]},s.abrupt("return",v.a.post(z+"client",c).then((function(e){return console.log("App- added new client to DB:",e),!0})).catch((function(e){return console.log(e),!1})));case 6:case"end":return s.stop()}}))},e.advancedUpdateClient=function(t,a,n){var l=e.state.clients;for(var r in l)if(l[r].name.toLowerCase()===t.toLowerCase()){var c=l[r],s=c._id,i={};return i[a]=n,v.a.put(z+"client/".concat(s),i).then((function(e){console.log("App- updated Client Vals:",e)})).catch((function(e){return console.log(e)})),c[a]=n,l[r]=c,e.setState({clients:l}),!0}return!1},e.updateClient=function(t,a){v.a.put(z+"client/".concat(t),a).then((function(e){console.log("App- updating Client Vals:",e)})).catch((function(e){return console.log(e)}));var n=e.state.clients;for(var l in n)if(n[l]._id===t){for(var r=n[l],c=0,s=Object.keys(a);c<s.length;c++){var i=s[c];r[i]=a[i]}return n[l]=r,void e.setState({clients:n})}},e.state={clients:[],salesByCategory:{owner:[],emailType:[],country:[]},salesSince:{data:[],ready:!1},clientsSum:{data:{1:0,6:0,12:0},ready:!1}},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"pastMonths",value:function(e){for(var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date,n=[{month:t[a.getMonth()],year:a.getYear()+1900}],l=0;l<e;l++)a.setDate(a.getDate()-30),n.push({month:t[a.getMonth()],year:a.getYear()+1900});return n.reverse()}},{key:"capitalizeWord",value:function(e){return void 0!==e?e.charAt(0).toUpperCase()+e.slice(1):""}},{key:"render",value:function(){var e=this;console.log(z);var t=this.state,a=t.clients,n=t.salesByCategory,r=t.salesSince,c=t.clientsSum;return l.a.createElement(h.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(g,null),l.a.createElement(y.a,{exact:!0,path:"/",render:function(){return l.a.createElement(E,null)}}),l.a.createElement(y.a,{exact:!0,path:"/clients",render:function(){return l.a.createElement(k,{clients:a,updateClient:e.updateClient})}}),l.a.createElement(y.a,{exact:!0,path:"/actions",render:function(){return l.a.createElement(x,{salesByOwner:n.owner,changeClientInfo:e.advancedUpdateClient,addNewClient:e.addNewClient})}}),l.a.createElement(y.a,{exact:!0,path:"/analytics",render:function(){return l.a.createElement(K,{getSalesByCategory:e.getSalesByCategory,salesByCategory:n,handleMonthlySales:e.handleMonthlySales,salesSince:r,clientsSum:c})}}),l.a.createElement("div",{id:"footer-bar"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},42:function(e,t,a){}},[[200,1,2]]]);
//# sourceMappingURL=main.6ae41111.chunk.js.map